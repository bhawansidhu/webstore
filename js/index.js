const webStore =[
   {
  productID: 2501,
  name: `Blue Shirt`,
  imageUrl: `img/blue shirt.jpg`,
  colors: [`White`, `Blue`],
  productsOnSale: true,
  discount: `20%`,
  product: `Dress`,
  stock: 6,
  sizes: [`XS`,`S`,`M`,`L`,`XL`],
  category: `Formal`,
  price: `135`,
  rating: 4

},

  {
  productID: 2502,
  name: `Red Shirt`,
  imageUrl: `img/red shirt.jpg`,
  colors: [`White`, `Blue`,  `Red`],
  productsOnSale: true,
  discount: `20%`,
  product: `Dress`,
  stock: 4,
  sizes: [`XS`,`S`,`M`,`L`,`XL`],
  category: `Formal`,
  price: `147`,
  rating: 5

},

 {
  productID: 2503,
  name: `white Shirt`,
  imageUrl: `img/white shirt.jpg`,
  colors: [`White`, `Blue`, `Red`],
  productsOnSale: true,
  product: `Dress`,
  stock: 30,
  sizes: [`XS`,`S`,`M`,`L`,`XL`],
  discount: `20%`,
  category: `casual`,
  price: `168`,
  rating: 4

},

 {
  productID: 2504,
  name: `Black Shirt`,
  imageUrl: `img/black shirt.jpg`,
  colors: [`White`, `Blue`, `Black`, `Red`],
  productsOnSale: false,
  product: `Dress`,
  stock: 12,
  sizes: [`XS`,`S`,`M`,`L`,`XL`],
  discount: `20%`,
  category: `Formal`,
  price: `124`,
  rating: 3

},


 {
  productID: 2505,
  name: `black jeans`,
  imageUrl: `img/black jeans.jpg`,
  colors: [`Black`],
  productsOnSale: true,
  stock: 19,
  sizes: [`XS`,`S`,`M`,`L`,`XL`],
  discount: `10%`,
  category: `casual`,
  product: `Dress`,
  price: `150`,
  rating: 5

},

 {
  productID: 2506,
  name: `blue jeans`,
  imageUrl: `img/blue jeans.jpg`,
  colors: [`White`, `Blue`],
  productsOnSale: false,
  product: `Dress`,
  stock: 6,
  sizes: [`XS`,`S`,`M`,`L`,`XL`],
  discount: `10%`,
  category: `casual`,
  price: `130`,
  rating: 3

},
 {
  productID: 2507,
  name: `skinny jeans`,
  imageUrl: `img/skinny jeans.jpg`,
  colors: [`White`, `Blue`, `Black`],
  productsOnSale: true,
  stock: 2,
  sizes: [`XS`,`S`,`M`,`L`,`XL`],
  discount: `10%`,
  product: `Dress`,
  category: `casual`,
  price: `120`,
  rating: 1

},

 {
  productID: 2508,
  name: `white jeans`,
  imageUrl: `img/white jeans.jpg`,
  colors: [`White`, `Blue`],
  productsOnSale: false,
  product: `Dress`,
  stock: 20,
  sizes: [`XS`,`S`,`M`,`L`,`XL`],
  discount: `10%`,
  category: `Formal`,
  price: `120`,
  rating: 2

},

 {
  productID: 2509,
  name: `Blue Skirt`,
  imageUrl: `img/blueskirt.jpg`,
  colors: [`White`, `Blue`],
  productsOnSale: true,
  stock: 22,
  sizes: [`XS`,`S`,`M`],
  discount: `10%`,
  product: `Dress`,
  category: `Formal`,
  price: `350`,
  rating: 2

},

 {
  productID: 2510,
  name: `Red Skirt`,
  imageUrl: `img/red skirt.jpg`,
  colors: [ `Red`],
  productsOnSale: true,
  stock: 13,
  sizes: [`XS`,`S`,`XL`],
  discount: `10%`,
  product: `Dress`,
  category: `casual`,
  price: `355`,
  rating: 1

},

 {
  productID: 2511,
  name: `black Skirt`,
  imageUrl: `img/black skirt.jpg`,
  colors: [ `Black`],
  productsOnSale: true,
  stock: 10,
  sizes: [`XS`,`L`,`XL`],
  discount: `10%`,
  category: `Formal`,
  product: `Dress`,
  price: `420`,
  rating: 4,

},

{
  productID: 2512,
  name: `white Skirt`,
  imageUrl: `img/white skirt.jpeg`,
  colors: [`White`],
  productsOnSale: true,
  stock: 12,
  sizes: [`M`,`L`,`XL`],
  discount: `20%`,
  category: `Formal`,
  product: `Dress`,
  price: `348`,
  rating: 1

},



 {
  productID: 2513,
  name: `Ankle shoes`,
  imageUrl: `img/ankle shoes.jpg`,
  colors: [`White`,  `Red`],
  productsOnSale: true,
  stock: 12,
  sizes: [`XS`,`S`,`M`],
  discount:`20%`,
  product: `Footwear`,
  category: `casual`,
  price: `200`,
  rating: 2

},

{
  productID: 2514,
  name: `brown shoes`,
  imageUrl: `img/brown shoes.jpg`,
  colors: [ `Red`],
  productsOnSale: true,
  stock: 12,
  sizes: [`XS`,`XL`],
  discount: `20%`,
  category: `Formal`,
  product: `Footwear`,
  price: `190`,
  rating: 2

},

 {
  productID: 2515,
  name: `white shoes`,
  imageUrl: `img/white shoes.jpg`,
  colors: [`White`],
  productsOnSale: false,
  stock: 12,
  sizes: [`XS`],
  discount: `20%`,
  category: `casual`,
  product: `Footwear`,
  price: `290`,
  rating: 3

},

 {
  productID: 2516,
  name: `snow shoes`,
  imageUrl: `img/snow shoes.jpg`,
  colors: [`White`, `Blue`],
  productsOnSale: true,
  stock: 12,
  sizes: [`XL`],
  discount: `20%`,
  category: `casual`,
  product: `Footwear`,
  price: `180`,
  rating: 5

},


 {
  productID: 2517,
  name: `Black heels`,
  imageUrl: `img/black heels.jpg`,
  colors: [`Black`, `Red`],
  productsOnSale: true,
  stock: 20,
  sizes: [`L`],
  discount: `15%`,
  category: `Formal`,
  product: `Footwear`,
  price: `390`,
  rating: 4

},

{
  productID: 2518,
  name: `red heels`,
  imageUrl: `img/red heels.jpg`,
  colors: [ `Red`],
  productsOnSale: false,
  stock: 12,
  sizes: [`M`],
  discount: `15%`,
  category: `Formal`,
  product: `Footwear`,
  price: `160`,
  rating: 2

},

 {
  productID: 2519,
  name: `white heels`,
  imageUrl: `img/white heel.jpg`,
  colors: [`White`],
  productsOnSale: false,
  stock: 12,
  sizes: [`XS`,`S`,`M`,`L`,`XL`],
  discount: `15%`,
  category: `casual`,
  product: `Footwear`,
  price: `190`,
  rating: 5

},

 {
  productID: 2520,
  name: `Blue heels`,
  imageUrl: `img/blue heels.jpg`,
  colors: [ `Blue`],
  productsOnSale: false,
  stock: 10,
  sizes: [`XS`,`S`,`M`,`L`,`XL`],
  discount: `15%`,
  category: `Formal`,
  product: `Footwear`,
  price: `150`,
  rating: 5
 }

 ];

function getDataAsHtml(webStore ) {
let productsOnSale='';
  let cartBtn=``;
  if( webStore.productsOnSale ==true){
    productsOnSale=`<small class="productsOnSaleAdd">product On Sale!<br>Hurry up !!!</small>`;
    cartBtn=`<button type="button" class="productCartBut"  data-code="${webStore.productCode}" id="addtocart"><span class="material-icons">add_shopping_cart</span> Add to Cart</button> `;
  
  }
  else{
    productsOnSale=`<small class="outOfStock">Out of stock</small>`
  }
  
  return `
    <section class="productsList"> 
    <img class="productImage" src="${webStore.imageUrl}"  style="width:100%;height:230px;" alt="${webStore.name}">
    
    ${productsOnSale}
    <h1 class="ProductName"><strong>${webStore.name}</strong></h1>
        <ul class="productListItems">
         
          <li class="productPrice"><h3>Price: $${webStore.price}</h3></li>
          <li class="productDiscount"><p> Discount: ${webStore.discount}<p></li>
          <li class="productRating"><p> rating: ${webStore.rating}<p></li>
          <li class="productCategory"><h3>${webStore.category}</h3></li>
          
      
        </ul>
        ${cartBtn}
        </section>`;
}

document.getElementById(`productId`).innerHTML = webStore .map(getDataAsHtml).join("\n");


  

  //search functionality
function getProductsByName(n){
  n.preventDefault();
  const search=document.getElementById('search').value;
  const lowerCase=search.trim().toLowerCase();
  const searchResultsArray=webStore .filter(p=> p.name.toLowerCase().includes(lowerCase));
  sortByProducts(searchResultsArray);
}


// discount filter function
const tenPercentFilter = () =>{
  const tenDiscount = webStore.filter(p => p.discount == `10%` );
  sortByProducts(tenDiscount);
}

const fifteenPercentFilter = () => {
  const fifteenDiscount = webStore.filter(p => p.discount == `15%` );
  sortByProducts(fifteenDiscount);
}

const twentyPercentFilter = () => {
  const twentyDiscount = webStore.filter(p => p.discount == `20%` );
  sortByProducts(twentyDiscount);
}



// category filter 
const formalFilter=() => {
  const formalProducts = webStore.filter(p => p.category == `Formal`);
  sortByProducts(formalProducts);
}
const casualFilter=() => {
  const casualProducts = webStore.filter(p => p.category == `casual`);
  sortByProducts(casualProducts);

}

// Product filter 
const dressFilter=() => {
  const Dresses = webStore.filter(p => p.product == `Dress`);
  sortByProducts(Dresses);
}
const footWearFilter=() => {
  const footWears = webStore.filter(p => p.product == `Footwear`);
  sortByProducts(footWears);

}

// colors filter function
const blackColorFilter = () =>{
  const blackColor = webStore.filter(c => c.colors == `Black`);
  sortByProducts(blackColor);
}

const whiteColorFilter = () => {
  const whiteColor = webStore.filter(c => c.colors == `White`);
  sortByProducts(whiteColor);
}

const redColorFilter = () => {
  const redColor = webStore.filter(c => c.colors == `Red`);
  sortByProducts(redColor);
}

const blueColorFilter = () => {
  const blueColor = webStore.filter(c => c.colors == `Blue`);
  sortByProducts(blueColor);
}



// star rating function 

const fiveStarFilter = () => {
  const fiveStars = webStore.filter(c => c.rating >=4)
  sortByProducts(fiveStars)
}

const fourStarFilter = () => {
  const fourStars = webStore.filter(c => c.rating >=3 && c.rating < 4)
  sortByProducts(fourStars)
}

const threeStarFilter = () => {
  const threeStars = webStore.filter(c => c.rating >=2 &&  c.rating < 3)
  sortByProducts(threeStars)
}

const twoStarFilter = () => {
  const twoStars = webStore.filter(c => c.rating >=1  &&  c.rating < 2)
  sortByProducts(twoStars)
}


// Size filter function

const sizeXsFilter = () =>{
  const xsProducts = webStore.filter(c => c.sizes =="XS");
  sortByProducts(xsProducts)
}

const sizeSFilter = () =>{
  const sProducts = webStore.filter(c => c.sizes =="S");
  sortByProducts(sProducts)
}

const sizeMFilter = () =>{
  const mProducts = webStore.filter(c => c.sizes =="M");
  sortByProducts(mProducts)
}

const sizeLFilter = () =>{
  const lProducts = webStore.filter(c => c.sizes =="L");
  sortByProducts(lProducts)
}

const sizeXlFilter = () =>{
  const xlProducts = webStore.filter(c =>c.sizes =="XL");
  sortByProducts(xlProducts)
}





//top rated function
function getProductsByRatings() {
  
  const ratingArray = webStore.sort((x, y) => (x.rating < y.rating ? 1 : -1));
  sortByProducts(ratingArray);
}


//sorting functions

function getProductsPriceLowToHigh() {

  const PriceLowToHighArray = webStore.sort((x, y) => (x.price > y.price ? 1 : -1));
  sortByProducts(PriceLowToHighArray);
}


function getProductsPriceHighTolow() {

  const PriceHighToLowArray = webStore .sort((x, y) => (x.price < y.price ? 1 : -1));
  sortByProducts(PriceHighToLowArray);
}




// products on sale function
function getProductsOnSale(){
  
  const productsOnSaleArray= webStore.filter(p => p.productsOnSale == true);
  sortByProducts(productsOnSaleArray);
}


function sortByProducts(array) {
  document.getElementById(`productId`).innerHTML = array.map(getDataAsHtml).join("\n");
  let result = 'Products';
  if (array.length >0) {
    result = 'Products'
    document.getElementById('resultInNumber').innerHTML = `(${array.length} ${result})`;
  }} 

window.addEventListener('load', () => {
sortByProducts(webStore);
document.getElementById(`search`).addEventListener("input", getProductsByName);
document.getElementById(`PriceHighToLow`).addEventListener("click", getProductsPriceHighTolow);
document.getElementById(`PriceLowToHigh`).addEventListener("click", getProductsPriceLowToHigh);
document.getElementById(`topRated`).addEventListener("click", getProductsByRatings);
document.getElementById(`productsOnSale`).addEventListener("click", getProductsOnSale);

document.getElementById(`formal`).addEventListener("click",formalFilter);
document.getElementById(`casual`).addEventListener("click",casualFilter);

document.getElementById(`dress`).addEventListener("click",dressFilter);
document.getElementById(`footWear`).addEventListener("click",footWearFilter);

document.getElementById(`ten`).addEventListener("click",tenPercentFilter);
document.getElementById(`fifteen`).addEventListener("click",fifteenPercentFilter);
document.getElementById(`twenty`).addEventListener("click",twentyPercentFilter);

document.getElementById(`black`).addEventListener("click",blackColorFilter);
document.getElementById(`white`).addEventListener("click",whiteColorFilter);
document.getElementById(`red`).addEventListener("click",redColorFilter);
document.getElementById(`blue`).addEventListener("click",blueColorFilter);

document.getElementById(`xSmall`).addEventListener("click",sizeXsFilter);
document.getElementById(`small`).addEventListener("click",sizeSFilter);
document.getElementById(`medium`).addEventListener("click",sizeMFilter);
document.getElementById(`large`).addEventListener("click",sizeLFilter);
document.getElementById(`xLarge`).addEventListener("click",sizeXlFilter);
    

document.getElementById(`Four`).addEventListener("click",fiveStarFilter);
document.getElementById(`Three`).addEventListener("click",fourStarFilter);
document.getElementById(`Two`).addEventListener("click",threeStarFilter);
document.getElementById(`One`).addEventListener("click",twoStarFilter);



getDataAsHtml(webStore);

});