const webStore =[
   {
  productID: 2501,
  name: `Blue Shirt`,
  imageUrl: `img/blue shirt.jpg`,
  colors: [`white`, `blue`],
  productsOnSale: true,
  discount: `20%`,
  stock: 6,
  sizes: [`XS`,`S`,`M`,`L`,`XL`],
  category: `Formal`,
  price: `135`,
  rating: 4.3,

},

  {
  productID: 2502,
  name: `Red Shirt`,
  imageUrl: `img/red shirt.jpg`,
  colors: [`white`, `blue`,  `red`],
  productsOnSale: true,
  discount: `20%`,
  stock: 4,
  sizes: [`XS`,`S`,`M`,`L`,`XL`],
  category: `Formal`,
  price: `147`,
  rating: 4.4,

},

 {
  productID: 2503,
  name: `white Shirt`,
  imageUrl: `img/white shirt.jpg`,
  colors: [`white`, `blue`, `red`],
  productsOnSale: true,
  stock: 30,
  sizes: [`XS`,`S`,`M`,`L`,`XL`],
  discount: `20%`,
  category: `casual`,
  price: `168`,
  rating: 4.3,

},

 {
  productID: 2504,
  name: `Black Shirt`,
  imageUrl: `img/black shirt.jpg`,
  colors: [`white`, `blue`, `black`, `red`],
  productsOnSale: false,
  stock: 12,
  sizes: [`XS`,`S`,`M`,`L`,`XL`],
  discount: `20%`,
  category: `Formal`,
  price: `124`,
  rating: 4.4,

},


 {
  productID: 2505,
  name: `black jeans`,
  imageUrl: `img/black jeans.jpg`,
  colors: [`white`, `blue`,`black`],
  productsOnSale: true,
  stock: 19,
  sizes: [`XS`,`S`,`M`,`L`,`XL`],
  discount: `10%`,
  category: `casual`,
  price: `150`,
  rating: 4.5,

},

 {
  productID: 2506,
  name: `blue jeans`,
  imageUrl: `img/blue jeans.jpg`,
  colors: [`white`, `blue`],
  productsOnSale: false,
  stock: 6,
  sizes: [`XS`,`S`,`M`,`L`,`XL`],
  discount: `10%`,
  category: `casual`,
  price: `130`,
  rating: 4.3,

},
 {
  productID: 2507,
  name: `skinny jeans`,
  imageUrl: `img/skinny jeans.jpg`,
  colors: [`white`, `blue`, `black`],
  productsOnSale: true,
  stock: 2,
  sizes: [`XS`,`S`,`M`,`L`,`XL`],
  discount: `10%`,
  category: `causal`,
  price: `120`,
  rating: 4.5,

},

 {
  productID: 2508,
  name: `white jeans`,
  imageUrl: `img/white jeans.jpg`,
  colors: [`white`, `blue`],
  productsOnSale: false,
  stock: 20,
  sizes: [`XS`,`S`,`M`,`L`,`XL`],
  discount: `10%`,
  category: `Formal`,
  price: `120`,
  rating: 4.3,

},

 {
  productID: 2509,
  name: `Blue Skirt`,
  imageUrl: `img/blueskirt.jpg`,
  colors: [`white`, `blue`],
  productsOnSale: true,
  stock: 22,
  sizes: [`XS`,`S`,`M`,`L`,`XL`],
  discount: `10%`,
  category: `Formal`,
  price: `350`,
  rating: 4.4,

},

 {
  productID: 2510,
  name: `red Skirt`,
  imageUrl: `img/red skirt.jpg`,
  colors: [`white`, `black`, `red`],
  productsOnSale: true,
  stock: 13,
  sizes: [`XS`,`S`,`M`,`L`,`XL`],
  discount: `10%`,
  category: `casual`,
  price: `355`,
  rating: 5,

},

 {
  productID: 2511,
  name: `black Skirt`,
  imageUrl: `img/black skirt.jpg`,
  colors: [`white`, `blue`, `black`, `red`],
  productsOnSale: true,
  stock: 10,
  sizes: [`XS`,`S`,`M`,`L`,`XL`],
  discount: `10%`,
  category: `Formal`,
  price: `420`,
  rating: 4.3,

},

{
  productID: 2512,
  name: `white Skirt`,
  imageUrl: `img/white skirt.jpeg`,
  colors: [`white`, `blue`, `red`],
  productsOnSale: true,
  stock: 12,
  sizes: [`XS`,`S`,`M`,`L`,`XL`],
  discount: `20%`,
  category: `Formal`,
  price: `348`,
  rating: 4.4,

},



 {
  productID: 2513,
  name: `Ankle shoes`,
  imageUrl: `img/ankle shoes.jpg`,
  colors: [`white`, `blue`, `black`, `red`],
  productsOnSale: true,
  stock: 12,
  sizes: [`XS`,`S`,`M`,`L`,`XL`],
  discount:`20%`,
  category: `casual`,
  price: `200`,
  rating: 4.3,

},

{
  productID: 2514,
  name: `brown shoes`,
  imageUrl: `img/brown shoes.jpg`,
  colors: [`white`, `blue`,  `red`],
  productsOnSale: true,
  stock: 12,
  sizes: [`XS`,`S`,`M`,`L`,`XL`],
  discount: `20%`,
  category: `Formal`,
  price: `190`,
  rating: 4.4,

},

 {
  productID: 2515,
  name: `white shoes`,
  imageUrl: `img/white shoes.jpg`,
  colors: [`white`, `blue`, `red`],
  productsOnSale: false,
  stock: 12,
  sizes: [`XS`,`S`,`M`,`L`,`XL`],
  discount: `20%`,
  category: `casual`,
  price: `290`,
  rating: 4.3,

},

 {
  productID: 2516,
  name: `snow shoes`,
  imageUrl: `img/snow shoes.jpg`,
  colors: [`white`, `blue`],
  productsOnSale: true,
  stock: 12,
  sizes: [`XS`,`S`,`M`,`L`,`XL`],
  discount: `20%`,
  category: `casual`,
  price: `180`,
  rating: 4.4,

},


 {
  productID: 2517,
  name: `Black heels`,
  imageUrl: `img/black heels.jpg`,
  colors: [`white`, `blue`, `black`, `red`],
  productsOnSale: true,
  stock: 20,
  sizes: [`XS`,`S`,`M`,`L`,`XL`],
  discount: `15%`,
  category: `Formal`,
  price: `390`,
  rating: 4.4,

},

{
  productID: 2518,
  name: `red heels`,
  imageUrl: `img/red heels.jpg`,
  colors: [`white`, `blue`, `black`, `red`],
  productsOnSale: false,
  stock: 12,
  sizes: [`XS`,`S`,`M`,`L`,`XL`],
  discount: `15%`,
  category: `Formal`,
  price: `160`,
  rating: 4.5,

},

 {
  productID: 2519,
  name: `white heels`,
  imageUrl: `img/white heel.jpg`,
  colors: [`white`, `balck`, `red`],
  productsOnSale: false,
  stock: 12,
  sizes: [`XS`,`S`,`M`,`L`,`XL`],
  discount: `15%`,
  category: `casual`,
  price: `190`,
  rating: 4.4,

},

 {
  productID: 2520,
  name: `Blue heels`,
  imageUrl: `img/blue heels.jpg`,
  colors: [`white`, `blue`,`red`],
  productsOnSale: false,
  stock: 10,
  sizes: [`XS`,`S`,`M`,`L`,`XL`],
  discount: `15%`,
  category: `Formal`,
  price: `150`,
  rating: 4.3,
 }

 ];

function getDataAsHtml(webStore ) {
let productsOnSale='';
  let cartBtn=``;
  let outOfStock=``;
  if( webStore.productsOnSale ==true){
    productsOnSale=`<small class="productsOnSaleAdd">product On Sale!<br>Hurry up !!!</small>`;
    cartBtn=`<button type="button" class="productCartBut"  data-code="${webStore.productCode}" id="addtocart"><span class="material-icons">add_shopping_cart</span> Add to Cart</button> `;
  
  }
  else{
    productsOnSale=`<small class="outOfStock">Out of stock</small>`
  }
  
  return `
    <section class="productsList"> 
    <img class="productImage" src="${webStore.imageUrl}"  style="width:100%;height:230px;" alt="${webStore.name}">
    
    ${productsOnSale}
    <h1 class="ProductName"><strong>${webStore.name}</strong></h1>
        <ul class="productListItems">
         
          <li class="productPrice"><h3>Price: $${webStore.price}</h3></li>
          <li class="productDiscount"><p> Discount: ${webStore.discount}<p></li>
          <li class="productRating"><p> rating: ${webStore.rating}<p></li>
          <li class="productCategory"><h3>${webStore.category}</h3></li>
          
      
        </ul>
        ${cartBtn}
        </section>`;
}

document.getElementById(`productId`).innerHTML = webStore .map(getDataAsHtml).join("\n");


  

  //search functionality
function getProductsByName(n){
  n.preventDefault();
  const search=document.getElementById('search').value;
  const lowerCase=search.trim().toLowerCase();
  const searchResultsArray=webStore .filter(p=> p.name.toLowerCase().includes(lowerCase));
  sortByProducts(searchResultsArray);
}


const formalFilter=() => {
  const formalDresses = webStore.filter(p => p.category == `Formal`);
  renderDresses(formalDresses);
}



const casualFilter = () => {
  const casualDresses = webStore.filter(P => P.category == `Casual`);
  renderDresses(casualDresses);

}

//top rated function
function getProductsByRatings() {
  
  const ratingArray = webStore.sort((x, y) => (x.rating < y.rating ? 1 : -1));
  sortByProducts(ratingArray);
}


//sorting functions

function getProductsPriceLowToHigh() {

  const PriceLowToHighArray = webStore.sort((x, y) => (x.price > y.price ? 1 : -1));
  sortByProducts(PriceLowToHighArray);
}


function getProductsPriceHighTolow() {

  const PriceHighToLowArray = webStore .sort((x, y) => (x.price < y.price ? 1 : -1));
  sortByProducts(PriceHighToLowArray);
}




// products on sale function
function getProductsOnSale(){
  
  const productsOnSaleArray= webStore.filter(p => p.productsOnSale == true);
  sortByProducts(productsOnSaleArray);
}


function sortByProducts(array) {
  document.getElementById(`productId`).innerHTML = array.map(getDataAsHtml).join("\n");
  let result = 'Products';
  if (array.length >0) {
    result = 'Products'
    document.getElementById('resultInNumber').innerHTML = `(${array.length} ${result})`;
  }} 

window.addEventListener('load', () => {

document.getElementById(`search`).addEventListener("change", getProductsByName);
document.getElementById(`PriceHighToLow`).addEventListener("click", getProductsPriceHighTolow);
document.getElementById(`PriceLowToHigh`).addEventListener("click", getProductsPriceLowToHigh);
document.getElementById(`topRated`).addEventListener("click", getProductsByRatings);
document.getElementById(`productsOnSale`).addEventListener("click", getProductsOnSale);
document.getElementById(`casual`).addEventListener("click",casualFilter);
  document.getElementById(`formal`).addEventListener("click",formalFilter);
  



getDataAsHtml(webStore);

});